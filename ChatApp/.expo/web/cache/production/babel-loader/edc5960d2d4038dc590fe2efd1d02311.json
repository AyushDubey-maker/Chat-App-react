{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useState,useEffect}from'react';import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Text from\"react-native-web/dist/exports/Text\";import View from\"react-native-web/dist/exports/View\";import{ListItem,Avatar}from'react-native-elements';import{db}from\"../firebase\";var CustomListItem=function CustomListItem(_ref){var _messages$,_messages$2,_messages$3;var id=_ref.id,chatName=_ref.chatName,enterChat=_ref.enterChat;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),messages=_useState2[0],setMessages=_useState2[1];useEffect(function(){var unsubscribe=db.collection('chats').doc(id).collection('messages').orderBy('timestamp','desc').onSnapshot(function(snapshot){return setMessages(snapshot.docs.map(function(doc){return doc.data();}));});return unsubscribe;});return React.createElement(ListItem,{key:id,bottomDivider:true,onPress:function onPress(){return enterChat(id,chatName);}},React.createElement(Avatar,{rounded:true,source:{uri:(messages==null?void 0:(_messages$=messages[0])==null?void 0:_messages$.photoURL)||\"https://cencup.com/wp-content/uploads/2019/07/avatar-placeholder.png\"}}),React.createElement(ListItem.Content,null,React.createElement(ListItem.Title,{style:{fontWeight:'800'}},chatName),React.createElement(ListItem.Subtitle,{numberOfLines:1,ellipsizeMode:\"tail\"},(messages==null?void 0:(_messages$2=messages[0])==null?void 0:_messages$2.displayName)||\"No Chat Yet\",\":\",messages==null?void 0:(_messages$3=messages[0])==null?void 0:_messages$3.message)));};export default CustomListItem;var styles=StyleSheet.create({});","map":{"version":3,"sources":["C:/Users/Ayush/Desktop/React Native/Chat-App/ChatApp/components/CustomListItem.js"],"names":["React","useState","useEffect","ListItem","Avatar","db","CustomListItem","id","chatName","enterChat","messages","setMessages","unsubscribe","collection","doc","orderBy","onSnapshot","snapshot","docs","map","data","uri","photoURL","fontWeight","displayName","message","styles","StyleSheet","create"],"mappings":"iEAAA,MAAOA,CAAAA,KAAP,EAAcC,QAAd,CAAuBC,SAAvB,KAAuC,OAAvC,C,2KAEA,OAAQC,QAAR,CAAiBC,MAAjB,KAA8B,uBAA9B,CACA,OAASC,EAAT,mBACA,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,MAA6B,2CAA3BC,CAAAA,EAA2B,MAA3BA,EAA2B,CAAxBC,QAAwB,MAAxBA,QAAwB,CAAfC,SAAe,MAAfA,SAAe,eACnBR,QAAQ,CAAC,EAAD,CADW,wCACzCS,QADyC,eAChCC,WADgC,eAEhDT,SAAS,CAAC,UAAI,CACb,GAAMU,CAAAA,WAAW,CAACP,EAAE,CAACQ,UAAH,CAAc,OAAd,EAAuBC,GAAvB,CAA2BP,EAA3B,EAA+BM,UAA/B,CAA0C,UAA1C,EACCE,OADD,CACS,WADT,CACqB,MADrB,EAC6BC,UAD7B,CACwC,SAACC,QAAD,QAAYN,CAAAA,WAAW,CAACM,QAAQ,CAACC,IAAT,CAAcC,GAAd,CAAkB,SAACL,GAAD,QAAOA,CAAAA,GAAG,CAACM,IAAJ,EAAP,EAAlB,CAAD,CAAvB,EADxC,CAAlB,CAEoB,MAAOR,CAAAA,WAAP,CAEJ,CALR,CAAT,CAMA,MACI,qBAAC,QAAD,EAAU,GAAG,CAAEL,EAAf,CAAmB,aAAa,KAAhC,CAAiC,OAAO,CAAE,yBAAIE,CAAAA,SAAS,CAACF,EAAD,CAAIC,QAAJ,CAAb,EAA1C,EACI,oBAAC,MAAD,EACA,OAAO,KADP,CAEA,MAAM,CAAE,CACJa,GAAG,CAAC,CAAAX,QAAQ,MAAR,oBAAAA,QAAQ,CAAG,CAAH,CAAR,0BAAeY,QAAf,GAA2B,sEAD3B,CAFR,EADJ,CAOI,oBAAC,QAAD,CAAU,OAAV,MACI,oBAAC,QAAD,CAAU,KAAV,EAAgB,KAAK,CAAE,CAACC,UAAU,CAAC,KAAZ,CAAvB,EAA4Cf,QAA5C,CADJ,CAEI,oBAAC,QAAD,CAAU,QAAV,EAAmB,aAAa,CAAE,CAAlC,CAAqC,aAAa,CAAC,MAAnD,EACE,CAAAE,QAAQ,MAAR,qBAAAA,QAAQ,CAAG,CAAH,CAAR,2BAAec,WAAf,GAA8B,aADhC,KACgDd,QADhD,2BACgDA,QAAQ,CAAG,CAAH,CADxD,eACgD,YAAee,OAD/D,CAFJ,CAPJ,CADJ,CAgBH,CAxBD,CA0BA,cAAenB,CAAAA,cAAf,CAEA,GAAMoB,CAAAA,MAAM,CAAGC,UAAU,CAACC,MAAX,CAAkB,EAAlB,CAAf","sourcesContent":["import React,{useState,useEffect} from 'react'\r\nimport { StyleSheet, Text, View } from 'react-native'\r\nimport {ListItem,Avatar} from 'react-native-elements'\r\nimport { db } from '../firebase'\r\nconst CustomListItem = ({id,chatName,enterChat}) => {\r\n    const [messages,setMessages]=useState([])\r\n    useEffect(()=>{\r\n     const unsubscribe=db.collection('chats').doc(id).collection('messages')\r\n                       .orderBy('timestamp','desc').onSnapshot((snapshot)=>setMessages(snapshot.docs.map((doc)=>doc.data())))   \r\n                         return unsubscribe;\r\n\r\n                    })\r\n    return (\r\n        <ListItem key={id} bottomDivider onPress={()=>enterChat(id,chatName)}>\r\n            <Avatar\r\n            rounded \r\n            source={{\r\n                uri:messages?.[0]?.photoURL || \"https://cencup.com/wp-content/uploads/2019/07/avatar-placeholder.png\"\r\n            }}\r\n            />\r\n            <ListItem.Content>\r\n                <ListItem.Title style={{fontWeight:'800'}}>{chatName}</ListItem.Title>\r\n                <ListItem.Subtitle numberOfLines={1} ellipsizeMode=\"tail\">\r\n                 {messages?.[0]?.displayName || \"No Chat Yet\"}:{messages?.[0]?.message }\r\n                </ListItem.Subtitle>\r\n            </ListItem.Content>\r\n        </ListItem>\r\n    )\r\n}\r\n\r\nexport default CustomListItem\r\n\r\nconst styles = StyleSheet.create({})\r\n"]},"metadata":{},"sourceType":"module"}