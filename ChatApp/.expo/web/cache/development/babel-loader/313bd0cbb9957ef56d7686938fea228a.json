{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\Ayush\\\\Desktop\\\\React Native\\\\Chat-App\\\\ChatApp\\\\screens\\\\ChatScreen.js\";\n\nimport React, { useLayoutEffect, useState } from 'react';\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport Keyboard from \"react-native-web/dist/exports/Keyboard\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport TouchableWithoutFeedback from \"react-native-web/dist/exports/TouchableWithoutFeedback\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { Avatar, Icon, Input } from 'react-native-elements';\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport FontAwesome from \"@expo/vector-icons/FontAwesome\";\nimport Ionicons from \"@expo/vector-icons/FontAwesome\";\nimport { auth, db } from \"../firebase\";\nimport firebase from 'firebase';\n\nvar ChatScreen = function ChatScreen(_ref) {\n  var navigation = _ref.navigation,\n      route = _ref.route;\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      input = _useState2[0],\n      setInput = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      messages = _useState4[0],\n      setMessages = _useState4[1];\n\n  useLayoutEffect(function () {\n    navigation.setOptions({\n      title: \"Chat\",\n      headerBackTitleVisible: false,\n      headerTitle: function headerTitle() {\n        return React.createElement(View, {\n          style: {\n            flexDirection: \"row\",\n            alignItems: \"center\"\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 24,\n            columnNumber: 13\n          }\n        }, React.createElement(Avatar, {\n          rounded: true,\n          source: {\n            uri: \"https://thecomeback.com/wp-content/uploads/2016/09/b28117ea-41bc-47fe-93ef-f82a1f31717b.jpg\"\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 25,\n            columnNumber: 17\n          }\n        }), React.createElement(Text, {\n          style: {\n            color: \"white\",\n            fontWeight: \"700\",\n            fontSize: 18,\n            marginLeft: 10\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 26,\n            columnNumber: 17\n          }\n        }, route.params.chatName));\n      },\n      headerRight: function headerRight() {\n        return React.createElement(View, {\n          style: {\n            flexDirection: \"row\",\n            justifyContent: \"space-between\",\n            width: 80,\n            marginRight: 20\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 30,\n            columnNumber: 13\n          }\n        }, React.createElement(TouchableOpacity, {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 38,\n            columnNumber: 17\n          }\n        }, React.createElement(FontAwesome, {\n          name: \"video-camera\",\n          size: 24,\n          color: \"white\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 39,\n            columnNumber: 20\n          }\n        })), React.createElement(TouchableOpacity, {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 42,\n            columnNumber: 17\n          }\n        }, React.createElement(Ionicons, {\n          name: \"phone\",\n          size: 24,\n          color: \"white\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 43,\n            columnNumber: 21\n          }\n        })));\n      }\n    });\n  }, []);\n\n  function sendMessage() {\n    if (input) {\n      Keyboard.dismiss();\n      db.collection('chats').doc(route.params.id).collection('messages').add({\n        timestamp: firebase.firestore.FieldValue.serverTimestamp(),\n        message: input,\n        displayName: auth.currentUser.displayName,\n        email: auth.currentUser.email,\n        photoURL: auth.currentUser.photoURL\n      });\n      setInput('');\n    }\n  }\n\n  useLayoutEffect(function () {\n    var unsubscribe = db.collection('chats').doc(route.params.id).collection('messages').orderBy('timestamp', 'desc').onSnapshot(function (snapshot) {\n      return setMessages(snapshot.docs.map(function (doc) {\n        return {\n          id: doc.id,\n          data: doc.data()\n        };\n      }));\n    });\n    return unsubscribe;\n  }, [route]);\n  return React.createElement(SafeAreaView, {\n    style: {\n      flex: 1,\n      backgroundColor: \"white\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }\n  }, React.createElement(StatusBar, {\n    style: \"light\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 11\n    }\n  }), React.createElement(KeyboardAvoidingView, {\n    behavior: Platform.OS === \"android\",\n    style: styles.container,\n    keyboardVerticalOffset: 90,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 11\n    }\n  }, React.createElement(TouchableWithoutFeedback, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 15\n    }\n  }, React.createElement(React.Fragment, null, React.createElement(ScrollView, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 15\n    }\n  }, messages.map(function (_ref2) {\n    var id = _ref2.id,\n        data = _ref2.data;\n    return data.email === auth.currentUser.email ? React.createElement(View, {\n      key: id,\n      style: styles.reciever,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 20\n      }\n    }, React.createElement(Avatar, {\n      rounded: true,\n      size: 30,\n      source: {\n        uri: data.photoURL\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 24\n      }\n    }), React.createElement(Text, {\n      style: styles.recieverText,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 24\n      }\n    }, data.message)) : React.createElement(View, {\n      key: id,\n      style: styles.sender,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 22\n      }\n    }, React.createElement(Avatar, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 25\n      }\n    }), React.createElement(Text, {\n      style: styles.senderText,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 24\n      }\n    }, data.message));\n  })), React.createElement(View, {\n    style: styles.footer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 15\n    }\n  }, React.createElement(TextInput, {\n    placeholder: \"Send a message\",\n    style: styles.textInput,\n    value: input,\n    onChangeText: function onChangeText(text) {\n      return setInput(text);\n    },\n    onSubmitEditing: sendMessage,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 15\n    }\n  }), React.createElement(TouchableOpacity, {\n    onPress: sendMessage,\n    activeOpacity: 0.5,\n    marginRight: 10,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 15\n    }\n  }, React.createElement(Icon, {\n    name: \"send\",\n    size: 24,\n    color: \"#2B68E6\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 19\n    }\n  })))))));\n};\n\nexport default ChatScreen;\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1\n  },\n  footer: {\n    flexDirection: \"row\",\n    alignItems: 'center',\n    width: \"100%\",\n    padding: 15\n  },\n  textInput: {\n    bottom: 0,\n    height: 40,\n    flex: 1,\n    marginRight: 15,\n    borderColor: \"transparent\",\n    backgroundColor: \"#ECECEC\",\n    padding: 10,\n    color: 'grey',\n    borderRadius: 30\n  },\n  reciever: {\n    padding: 15,\n    backgroundColor: \"#ECECEC\",\n    alignSelf: \"flex-end\",\n    borderRadius: 20,\n    marginRight: 15,\n    marginBottom: 20,\n    maxWidth: \"80%\",\n    position: \"relative\"\n  },\n  sender: {\n    padding: 15,\n    backgroundColor: \"#2B68E6\",\n    alignSelf: \"flex-start\",\n    borderRadius: 20,\n    margin: 15,\n    maxWidth: \"80%\",\n    position: \"relative\"\n  }\n});","map":{"version":3,"sources":["C:/Users/Ayush/Desktop/React Native/Chat-App/ChatApp/screens/ChatScreen.js"],"names":["React","useLayoutEffect","useState","Avatar","Icon","Input","FontAwesome","Ionicons","auth","db","firebase","ChatScreen","navigation","route","input","setInput","messages","setMessages","setOptions","title","headerBackTitleVisible","headerTitle","flexDirection","alignItems","uri","color","fontWeight","fontSize","marginLeft","params","chatName","headerRight","justifyContent","width","marginRight","sendMessage","Keyboard","dismiss","collection","doc","id","add","timestamp","firestore","FieldValue","serverTimestamp","message","displayName","currentUser","email","photoURL","unsubscribe","orderBy","onSnapshot","snapshot","docs","map","data","flex","backgroundColor","Platform","OS","styles","container","reciever","recieverText","sender","senderText","footer","textInput","text","StyleSheet","create","padding","bottom","height","borderColor","borderRadius","alignSelf","marginBottom","maxWidth","position","margin"],"mappings":"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","sourcesContent":["import React,{useLayoutEffect,useState} from 'react'\r\nimport { KeyboardAvoidingView } from 'react-native'\r\nimport { SafeAreaView } from 'react-native'\r\nimport { Platform } from 'react-native'\r\nimport { Keyboard } from 'react-native'\r\nimport { StatusBar } from 'react-native'\r\n\r\nimport  { TouchableOpacity, TouchableWithoutFeedback } from \"react-native\"\r\nimport { StyleSheet, Text, View } from 'react-native'\r\nimport { Avatar, Icon, Input } from 'react-native-elements'\r\nimport { ScrollView, TextInput } from 'react-native'\r\nimport FontAwesome from \"react-native-vector-icons/FontAwesome\"\r\nimport Ionicons from 'react-native-vector-icons/FontAwesome'\r\nimport { auth, db } from '../firebase'\r\nimport firebase from 'firebase'\r\nconst ChatScreen = ({navigation,route}) => {\r\n    const[input,setInput]=useState('')\r\n    const [messages,setMessages]=useState([])\r\n    useLayoutEffect(()=>{\r\n     navigation.setOptions({\r\n         title:\"Chat\",\r\n        headerBackTitleVisible:false,\r\n        headerTitle:()=>(\r\n            <View style={{flexDirection:\"row\",alignItems:\"center\"}}>\r\n                <Avatar rounded source={{uri:\"https://thecomeback.com/wp-content/uploads/2016/09/b28117ea-41bc-47fe-93ef-f82a1f31717b.jpg\"}}/>\r\n                <Text style={{color:\"white\",fontWeight:\"700\",fontSize:18,marginLeft:10}}>{route.params.chatName}</Text>\r\n            </View>\r\n        ),\r\n        headerRight:()=>(\r\n            <View\r\n             style={{\r\n                 flexDirection:\"row\",\r\n                 justifyContent:\"space-between\",\r\n                 width:80,\r\n                 marginRight:20\r\n             }}\r\n            >\r\n                <TouchableOpacity>\r\n                   <FontAwesome name=\"video-camera\" size={24} color=\"white\"/>\r\n\r\n                </TouchableOpacity>\r\n                <TouchableOpacity>\r\n                    <Ionicons name=\"phone\" size={24} color=\"white\"/>\r\n                </TouchableOpacity>\r\n            </View>\r\n        )\r\n     })\r\n    },[])\r\n    function sendMessage(){\r\n        if(input){\r\n       Keyboard.dismiss()\r\n        db.collection('chats').doc(route.params.id).collection('messages').add({\r\n            timestamp:firebase.firestore.FieldValue.serverTimestamp(),\r\n            message:input,\r\n            displayName:auth.currentUser.displayName,\r\n            email:auth.currentUser.email,\r\n            photoURL:auth.currentUser.photoURL\r\n\r\n        })\r\n        setInput('')\r\n    }\r\n}\r\nuseLayoutEffect(()=>{\r\n    const unsubscribe=db.collection('chats').doc(route.params.id).collection('messages')\r\n                      .orderBy('timestamp','desc').onSnapshot((snapshot)=>setMessages(snapshot.docs.map(doc=>({\r\n                          id:doc.id,\r\n                          data:doc.data()\r\n                      }))\r\n                      )\r\n                      )\r\n               return unsubscribe;\r\n                    },[route])\r\n    return (\r\n      <SafeAreaView style={{flex:1,backgroundColor:\"white\"}}>\r\n          <StatusBar style=\"light\"/>\r\n          <KeyboardAvoidingView\r\n          behavior={Platform.OS===\"android\"}\r\n          style={styles.container}\r\n          keyboardVerticalOffset={90}\r\n          >\r\n            \r\n              <TouchableWithoutFeedback >\r\n              <>\r\n              <ScrollView>\r\n              {messages.map(({id,data})=>(\r\n                  data.email===auth.currentUser.email?(\r\n                   <View key={id} style={styles.reciever} >\r\n                       <Avatar rounded  size={30} source={{\r\n                           \r\n                        uri:data.photoURL\r\n                       }}/>\r\n                       <Text style={styles.recieverText}>{data.message}</Text>\r\n                   </View>\r\n                  ):(\r\n                     <View  key={id} style={styles.sender}>\r\n                        <Avatar/>\r\n                       <Text style={styles.senderText}>{data.message}</Text>\r\n                     </View>\r\n                  )\r\n              ))}\r\n              </ScrollView>\r\n              <View style={styles.footer}>\r\n              <TextInput placeholder=\"Send a message\" style={styles.textInput} value={input} onChangeText={(text)=>setInput(text)} \r\n             onSubmitEditing={sendMessage}/>\r\n              <TouchableOpacity onPress={sendMessage} activeOpacity={0.5} marginRight={10}>\r\n                  <Icon name=\"send\" size={24} color=\"#2B68E6\"/>\r\n              </TouchableOpacity>\r\n              </View>\r\n              </>\r\n             </TouchableWithoutFeedback>\r\n           \r\n          </KeyboardAvoidingView>\r\n      </SafeAreaView>\r\n    )\r\n}\r\n\r\nexport default ChatScreen\r\n\r\nconst styles = StyleSheet.create({\r\n    container:{\r\n     flex:1\r\n    },\r\n    footer:{\r\n        flexDirection:\"row\",\r\n        alignItems:'center',\r\n        width:\"100%\",\r\n        padding:15\r\n    },\r\n    textInput:{\r\n        bottom:0,\r\n        height:40,\r\n        flex:1,\r\n        marginRight:15,\r\n        borderColor:\"transparent\",\r\n        backgroundColor:\"#ECECEC\",\r\n        padding:10,\r\n        color:'grey',\r\n        borderRadius:30\r\n    },\r\n    reciever:{\r\n        padding:15,\r\n        backgroundColor:\"#ECECEC\",\r\n        alignSelf:\"flex-end\",\r\n        borderRadius:20,\r\n        marginRight:15,\r\n        marginBottom:20,\r\n        maxWidth:\"80%\",\r\n        position:\"relative\"\r\n    },\r\n    sender:{\r\n       padding:15,\r\n       backgroundColor:\"#2B68E6\",\r\n       alignSelf:\"flex-start\",\r\n       borderRadius:20,\r\n       margin:15,\r\n       maxWidth:\"80%\",\r\n       position:\"relative\"\r\n    }\r\n})\r\n"]},"metadata":{},"sourceType":"module"}